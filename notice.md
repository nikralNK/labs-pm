# Лабораторная работа 22 - Работа с двумерным массивом и DataGridView

**Выполнил:** студент группы ИСПП-242 Кузнецова В. Б.

## Описание задачи

Создано приложение для работы с двумерным массивом (матрицей) с использованием компонента DataGridView. Программа генерирует матрицу случайных чисел и выполняет три различных задания.

## Элементы интерфейса

### Поля ввода
- `txtRows` - количество строк матрицы
- `txtCols` - количество столбцов матрицы
- `txtC` - число C для задания А
- `txtResult` - многострочное поле для вывода результатов (ReadOnly)

### Кнопки
- `btnCreate` - создание и заполнение матрицы случайными числами
- `btnTaskA` - выполнение задания А (изначально недоступна)
- `btnTaskB` - выполнение задания Б (изначально недоступна)
- `btnTaskC` - выполнение задания В (доступна только для матрицы 4x4)
- `btnClear` - очистка всех данных

### DataGridView
- `dataGridView1` - таблица для отображения матрицы
- `AllowUserToAddRows = false` - запрет добавления строк пользователем
- Размер 400x350 пикселей
- Ширина столбцов устанавливается программно (50 пикселей)

## Работа с двумерным массивом

### Переменные
```csharp
private int[,] matrix;  // двумерный массив
private int rows, cols;  // размеры матрицы
```

### Создание матрицы (btnCreate_Click)

**Валидация:**
1. Проверка на пустые поля
2. Проверка на корректность чисел (int.TryParse)
3. Проверка диапазона размеров (1-20)

**Процесс создания:**
1. Создается двумерный массив `matrix = new int[rows, cols]`
2. Очищается DataGridView
3. Устанавливается количество столбцов и строк в DataGridView
4. Устанавливается ширина столбцов (50px)
5. Генерируются случайные числа от -50 до 50
6. Заполняется матрица и DataGridView

**Управление доступностью кнопок:**
```csharp
btnTaskA.Enabled = true;
btnTaskB.Enabled = true;
btnTaskC.Enabled = (rows == 4 && cols == 4);
```

Задание В доступно только для матрицы размером 4x4.

## Задание А - Количество элементов больших C

### Логика работы
1. Проверка наличия матрицы
2. Проверка ввода числа C
3. Проход по всем элементам матрицы двойным циклом
4. Подсчет элементов больших C

```csharp
int count = 0;
for (int i = 0; i < rows; i++)
{
    for (int j = 0; j < cols; j++)
    {
        if (matrix[i, j] > c)
        {
            count++;
        }
    }
}
```

## Задание Б - Сумма элементов по периметру

### Логика работы

Суммируются элементы:
1. Первая строка (все элементы)
2. Последняя строка (все элементы)
3. Первый столбец (без углов - с 1 до rows-2)
4. Последний столбец (без углов - с 1 до rows-2)

```csharp
int sum = 0;

// Первая строка
for (int j = 0; j < cols; j++)
{
    sum += matrix[0, j];
}

// Последняя строка
for (int j = 0; j < cols; j++)
{
    sum += matrix[rows - 1, j];
}

// Первый столбец (без углов)
for (int i = 1; i < rows - 1; i++)
{
    sum += matrix[i, 0];
}

// Последний столбец (без углов)
for (int i = 1; i < rows - 1; i++)
{
    sum += matrix[i, cols - 1];
}
```

## Задание В - Сумма произведений для матрицы 4x4

### Условие
Доступно только для матрицы 4x4.

### Логика работы

**Шаг 1: Произведение четных элементов 1-й строки**
```csharp
int productEvenRow1 = 1;
bool hasEvenRow1 = false;

for (int j = 0; j < 4; j++)
{
    if (matrix[0, j] % 2 == 0)
    {
        productEvenRow1 *= matrix[0, j];
        hasEvenRow1 = true;
    }
}
```

Если четных элементов нет, произведение = 0.

**Шаг 2: Произведение положительных элементов 3-го столбца**
```csharp
int productPositiveCol3 = 1;
bool hasPositiveCol3 = false;

for (int i = 0; i < 4; i++)
{
    if (matrix[i, 2] > 0)  // 3-й столбец имеет индекс 2
    {
        productPositiveCol3 *= matrix[i, 2];
        hasPositiveCol3 = true;
    }
}
```

Если положительных элементов нет, произведение = 0.

**Шаг 3: Вычисление суммы**
```csharp
int result = productEvenRow1 + productPositiveCol3;
```

### Вывод результата
Выводится три строки:
- Произведение четных в 1-й строке
- Произведение положительных в 3-м столбце
- Сумма

## Работа с DataGridView

### Программное создание таблицы
```csharp
dataGridView1.ColumnCount = cols;
dataGridView1.RowCount = rows;
```

### Установка ширины столбцов
```csharp
for (int i = 0; i < cols; i++)
{
    dataGridView1.Columns[i].Width = 50;
}
```

### Заполнение ячеек
```csharp
dataGridView1.Rows[i].Cells[j].Value = matrix[i, j];
```

### Очистка таблицы
```csharp
dataGridView1.Rows.Clear();
dataGridView1.Columns.Clear();
```

## Свойства формы

- `FormBorderStyle = FixedSingle` - фиксированный размер окна
- `MaximizeBox = false` - без кнопки развернуть
- `StartPosition = CenterScreen` - окно по центру экрана
- `Text = "Выполнил студент группы ИСПП-242 Кузнецова В.Б."`

## Валидация данных

### Перед созданием матрицы
- Проверка на пустые поля
- Проверка на корректность числовых значений
- Проверка диапазона (1-20)

### Перед выполнением заданий
- Проверка наличия матрицы
- Для задания А: проверка ввода числа C
- Для задания В: проверка размера матрицы (4x4)

## Кнопка "Очистить"

Выполняет полный сброс:
- Очищает DataGridView
- Очищает все текстовые поля
- Обнуляет матрицу
- Делает кнопки заданий недоступными

## Особенности реализации

- Двумерный массив хранится отдельно от DataGridView
- Индексация столбцов и строк начинается с 0
- 3-й столбец имеет индекс 2 (для задания В)
- Используются флаги для определения наличия элементов при вычислении произведений
- Многострочное поле результатов с вертикальной прокруткой
